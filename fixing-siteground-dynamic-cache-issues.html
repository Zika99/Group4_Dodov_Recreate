<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group5 Dodov Recreate</title>
    <link rel="stylesheet" href="fixing-siteground-dynamic-cache-issues.css">
    <link rel="stylesheet" href="css/all.css">

</head>

<body>
    <div class="container">

         <nav class="nav-link">
            <div class="navLink"><a href="index.html">home</a></div>
            <div class="navLink"><a href="blog.html">blog</a></div>
            <div class="navLinkThird"><a href="fixing-siteground-dynamic-cache-issues.html">
                <i>fixing-siteground-dynamic-cache-issues</i></a>
                <i class="fa-solid fa-xmark"></i> 
            </div>           
            <div class="navLink"><a href="project.html">projects</a></div>
        </nav>

        <div class="main-container">

                <div class="numbers">

                    <div class="eachNumber"><a href="#number of ones">1</a></div>
                    <div class="eachNumber"><a href="#number of ones">2</a></div>
                    <div class="eachNumber"><a href="#number of ones">3</a></div>
                    <div class="eachNumber"><a href="#number of ones">4</a></div>
                    <div class="eachNumber"><a href="#number of ones">5</a></div>
                    <div class="eachNumber"><a href="#number of ones">6</a></div>
                    <div class="eachNumber"><a href="#number of ones">7</a></div>
                    <div class="eachNumber"><a href="#number of ones">8</a></div>
                    <div class="eachNumber"><a href="#number of ones">9</a></div>
                    <div class="eachNumber"><a href="#number of ones">10</a></div>
                    <div class="eachNumber"><a href="#number of ones">11</a></div>
                    <div class="eachNumber"><a href="#number of ones">12</a></div>
                    <div class="eachNumber"><a href="#number of ones">13</a></div>
                    <div class="eachNumber"><a href="#number of ones">14</a></div>
                    <div class="eachNumber"><a href="#number of ones">15</a></div>
                    <div class="eachNumber"><a href="#number of ones">16</a></div>
                    <div class="eachNumber"><a href="#number of ones">17</a></div>
                    <div class="eachNumber"><a href="#number of ones">18</a></div>
                    <div class="eachNumber"><a href="#number of ones">19</a></div>
                    <div class="eachNumber"><a href="#number of ones">20</a></div>
                    <div class="eachNumber"><a href="#number of ones">21</a></div>
                    <div class="eachNumber"><a href="#number of ones">22</a></div>
                    <div class="eachNumber"><a href="#number of ones">23</a></div>
                    <div class="eachNumber"><a href="#number of ones">24</a></div>
                    <div class="eachNumber"><a href="#number of ones">25</a></div>
                    <div class="eachNumber"><a href="#number of ones">26</a></div>
                    <div class="eachNumber"><a href="#number of ones">27</a></div>
                    <div class="eachNumber"><a href="#number of ones">28</a></div>
                    <div class="eachNumber"><a href="#number of ones">29</a></div>
                    <div class="eachNumber"><a href="#number of ones">30</a></div>
                    <div class="eachNumber"><a href="#number of ones">31</a></div>
                    <div class="eachNumber"><a href="#number of ones">32</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">33</a></div>
                    <div class="eachNumber"><a href="#number of ones">34</a></div>
                    <div class="eachNumber"><a href="#number of ones">35</a></div>
                    <div class="eachNumber"><a href="#number of ones">36</a></div>
                    <div class="eachNumber"><a href="#number of ones">37</a></div>
                    <div class="eachNumber"><a href="#number of ones">38</a></div>
                    <div class="eachNumber"><a href="#number of ones">39</a></div>
                    <div class="eachNumber"><a href="#number of ones">40</a></div>
                    <div class="eachNumber"><a href="#number of ones">41</a></div>
                    <div class="eachNumber"><a href="#number of ones">42</a></div>
                    <div class="eachNumber"><a href="#number of ones">43</a></div>
                    <div class="eachNumber"><a href="#number of ones">44</a></div>
                    <div class="eachNumber"><a href="#number of ones">45</a></div>
                    <div class="eachNumber"><a href="#number of ones">46</a></div>
                    <div class="eachNumber"><a href="#number of ones">47</a></div>
                    <div class="eachNumber"><a href="#number of ones">48</a></div>
                    <div class="eachNumber"><a href="#number of ones">49</a></div>
                    <div class="eachNumber"><a href="#number of ones">50</a></div>
                    <div class="eachNumber"><a href="#number of ones">51</a></div>
                    <div class="eachNumber"><a href="#number of ones">52</a></div>
                    <div class="eachNumber"><a href="#number of ones">53</a></div>
                    <div class="eachNumber"><a href="#number of ones">54</a></div>
                    <div class="eachNumber"><a href="#number of ones">55</a></div>
                    <div class="eachNumber"><a href="#number of ones">56</a></div>
                    <div class="eachNumber"><a href="#number of ones">57</a></div>
                    <div class="eachNumber"><a href="#number of ones">58</a></div>
                    <div class="eachNumber"><a href="#number of ones">59</a></div>
                    <div class="eachNumber"><a href="#number of ones">60</a></div>
                    <div class="eachNumber"><a href="#number of ones">61</a></div>
                    <div class="eachNumber"><a href="#number of ones">62</a></div>
                    <div class="eachNumber"><a href="#number of ones">63</a></div>
                    <div class="eachNumber"><a href="#number of ones">64</a></div>
                    <div class="eachNumber"><a href="#number of ones">65</a></div>

                </div>

                <div class="writeUps">

                    <div class="first-head">
                        <div class="head">
                            <h1>Fixing SiteGround Dynamic Cache Issues</h1>
                            <p>That's what you get for not using WordPress...</p>
                        </div>

                        <div class="date-f">
                            <p>12 Jan 2022</p>
                            <p>100 lines</p>
                        </div>
                    </div>

                    <div>
                        <div class="blogImgs">
                            <img src="img/siteground-random-characters-cover.png" alt="SiteGround Random Characters">
                        </div>
                    
                        <div class="space">
                            <p>If your website is hosted on SiteGround and you have strange <br> issues, such as clicking on a button and nothing happening, it <br> could be a cache issue. By default, SiteGround caches all <br> requests, as they've said in <a class="link" target="_blank" href="https://www.siteground.com/kb/siteground-dynamic-caching-configuration/">their help center article</a>:</p>        
                        </div>

                        <div class="space">
                            <p class="grey">
                                >  Our Dynamic caching is a full-page caching mechanism powered <br> 
                                >  by NGINX that's enabled and running by default on all <br> 
                                >  SiteGround servers.
                            </p>
                        </div>

                        <div class="space">
                            <p>The problem is that everything is cached, including the raw HTML <br> of your pages and AJAX requests made by either your front-end, <br> admin panel, or whatever. There also appears to be no way to <br> simply turn off this functionality.
                        </div>

                        <div class="space">
                            <p>In my case, I'm using Kirby CMS and this aggressive caching means <br> that if I change the status of a blog post from Draft to Public, <br> it actually happens at a filesystem level, but since the HTML of <br> the blog is cached, the article doesn't appear. Because AJAX <br> requests are also cached, the Kirby panel front-end isn't updated <br> as well, leaving no indication that something actually happened.</p>
                        </div>

                        <div class="space">
                            <p>
                                SiteGround has built-in exceptions for the cache. For example, if <br> a visitor has the <span class="yellow">wordpress_logged_in_</span> or <span class="yellow">Drupal.visitor.name</span> <br> cookie, they'll bypass the cache and see all changes they make <br> immediately. However, if you're using something other than <br> WordPress or Drupal, like me, you're screwed.
                            </p>
                        </div>

                        <div class="space">
                            <p>
                                Luckily, SiteGround respects <a class="link" target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control"><span class="yellow">Cache-Control</span> headers</a> that your <br> server sends. You can turn off the cache entirely by adding the <br> following in your main <span class="yellow">index.php</span> file:</p>
                            </p>
                        </div>

                        <div class="space black-b">
                            <p><span class="blue">header</span>('Cache-Control: no-cache');</p>
                        </div>

                        <div class="space">
                            <p>Alternatively, in case of using Kirby, you could disable it for <br> just the panel by <a class="link" target="_blank" href="https://regex101.com/r/tM1OZT/1">matching the request path with regex</a>:</p>
                        </div>

                        <div class="space black-b scroll">
                            <p>
                                <span class="pink">if</span> (<span class="blue">preg_match</span>(<span class="lemon">'~^/(panel|api)(/|\?|$)~', $_SERVER['REQUEST_URI'</span>])) { <br>
                                <span class="blue">header</span>(<span class="lemon">'Cache-Control: no-cache'</span>); <br>
                                }
                            </p>
                        </div>

                        <div class="space">
                            <p>You can check if this works by <a class="link" target="_blank" href="https://developer.chrome.com/docs/devtools/network/reference/#headers">inspecting the response headers</a> <br> and looking for the <span class="yellow">x-proxy-cache</span> header. It tells whether the <br> response was served by the cache or not. If you see the <br> following, the response was not cached:</p>
                        </div>

                        <div class="space black-b">
                            <p>x-proxy-cache: MISS</p>
                        </div>

                        <div>
                            <h1 class="heading">Handling Cloudflare Cache</h1>
                        </div>

                        <div class="space">
                            <p>Things can be even more confusing if you use Cloudflare, due to <br><a class="link" target="_blank" href="https://developers.cloudflare.com/cache/about/default-cache-behavior">its own caching functionality</a>. It has to be enabled explicitly <br> and only caches static files by default, so it has less <br> unpleasant surprises. In my opinion, it doesn't make much sense <br> to have both caches enabled, so you should probably disable one <br> or the other. You can determine the Cloudflare cache status by <br> looking at the <span class="yellow">cf-cache-status</span> header.</p>
                        </div>

                        <div class="space">
                            <p>The response is cached by Cloudflare if you have these headers:</p>
                        </div>

                        <div class="space black-b">
                            <p>
                                cf-cache-status: HIT <br>
                                x-proxy-cache: MISS
                            </p>
                        </div>

                        <div class="space">
                            <p>…and you get these headers if it's cached by SiteGround instead:</p>
                        </div>

                        <div class="space black-b">
                            <p>
                                cf-cache-status: DYNAMIC <br>
                                x-proxy-cache: HIT
                            </p>
                        </div>

                    </div>

                </div>

           
           
        <div>

        </div>
    </div>
</body>

</html>